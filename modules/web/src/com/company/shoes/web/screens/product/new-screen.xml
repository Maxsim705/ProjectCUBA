<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/screen/window.xsd"
        xmlns:c="http://schemas.haulmont.com/cuba/screen/jpql_condition.xsd"
        caption="msg://newScreen.caption"
        messagesPack="com.company.shoes.web.screens.product">
    <data>
        <collection id="productsDc" class="com.company.shoes.entity.Product" view="_local">
            <loader id="productsDl">
                <query>
                    <![CDATA[select e from shoes$Product e]]>
                </query>
            </loader>
        </collection>
        <collection id="salesDc" class="com.company.shoes.entity.Sale">
            <view extends="_local">
                <property name="product" view="_local"/>
            </view>
            <loader id="salesDl">
                <query>
                    <![CDATA[select e from shoes$Sale e]]>
                    <condition>
                        <and>
                            <c:jpql>
                                <c:where>e.product = :product</c:where>
                            </c:jpql>
                        </and>
                    </condition>
                </query>
            </loader>
        </collection>
    </data>
    <layout>
        <split id="split"
               orientation="horizontal"
               width="100%">
            <table id="productsTable" caption="Продукты"
                   width="100%" dataContainer="productsDc" multiselect="false">
                <actions>
                    <action id="create"/>
                    <action id="edit"/>
                    <action id="remove"/>
                </actions>
                <columns>
                    <column id="name"/>
                    <column id="type"/>
                    <column id="brand"/>
                    <column id="size"/>
                    <column id="genderAge"/>
                    <column id="color"/>
                    <column id="season"/>
                    <column id="productYear"/>
                    <column id="guarantee"/>
                    <column id="code"/>
                    <column id="price"/>
                    <column id="amount"/>
                </columns>
            </table>
            <table id="salesTable" caption="Поставки"
                   width="100%" dataContainer="salesDc">
                <actions>
                    <action id="create"/>
                    <action id="edit"/>
                    <action id="remove"/>
                </actions>
                <columns>
                    <column id="product"/>
                    <column id="date"/>
                    <column id="price"/>
                    <column id="amount"/>
                </columns>
            </table>
        </split>
    </layout>
</window>